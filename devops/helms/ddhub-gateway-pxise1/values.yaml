# Default values for ddhub-client-gateway-api.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
ddhub-client-gateway-api:
  replicaCount: 1

  clientgateway:
    config:
      # -- The URL of the DSB Message Broker you want to connect to. Trailing / allowed.
      dsb_base_url: https://qa.der.aemo.com.au/ddhub
      parent_namespace: ddhub.apps.aemo.iam.ewc
      secret_engine: azure
      # -- Sets the secret prefix in the secret engine.
      secret_prefix: "ddhub-pxise1/"
      node_env: test
      opentelemetry_enabled: false
    scheduler:
      enabled: true
      image:
        repository: aemocontainerregistry.azurecr.io/ddhub-client-gateway-scheduler
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: 1.3.2
      appConfig:
        NO_COLOR: "true"
    ui:
      enabled: true
      replicaCount: 1
      image:
        repository: aemocontainerregistry.azurecr.io/ddhub-client-gateway-frontend
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: 1.3.2
  image:
    # repository: 098061033856.dkr.ecr.us-east-1.amazonaws.com/ew-dos-dsb-ecr
    repository: aemocontainerregistry.azurecr.io/ddhub-client-gateway-backend
    pullPolicy: IfNotPresent
    # Overrides the image tag whose default is the chart appVersion.
    tag: 1.3.2

  imagePullSecrets: []
  nameOverride: "ddhub-client-gateway-pxise1"
  fullnameOverride: "ddhub-client-gateway-pxise1"

  config:
    enabled: true
    secretRefName: ddhub-client-gateway-pxise1-sealedsecret
    configRefName: ddhub-client-gateway-pxise1-configmap

  podSecurityContext: 
    fsGroup: 2000

  securityContext: {}
    # capabilities:
    #   drop:
    #   - ALL
    # readOnlyRootFilesystem: true
    # runAsNonRoot: true
    # runAsUser: 1000

  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: nginx
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"
      cert-manager.io/issuer: prod-issuer
      cert-manager.io/issuer-kind: OriginIssuer
      cert-manager.io/issuer-group: cert-manager.k8s.cloudflare.com
      cert-manager.io/duration: 90d
      cert-manager.io/renew-before: 30d  
    hosts:
      - host: ddhub-gateway-pxise1.energyweb.org
        paths:
        - path: /docs
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-pxise1
            servicePort: 80
        - path: /api
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-pxise1
            servicePort: 80
        - path: /docs-json
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-pxise1
            servicePort: 80
        - path: /events
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-pxise1
            servicePort: 80
        - path: /
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-pxise1-ui
            servicePort: 80
    tls:
      - secretName: ddhub-gateway-pxise1-tls-secret
        hosts:
          - ddhub-gateway-pxise1.energyweb.org

  sealedSecret:
    enabled: true
    encryptedData: 
      DB_NAME: AgBrcVlufWSl+g+Wfo/z7sFKkmnOgCu55QVhrT57vA3KWMktCC1/ft4Qs1f7SJ5b0GhtCVfxRzlflSzERRcl0aA23o1Vl42fqKcwX+m3/Xy5TjFFtRMcETbvXzN61QtIDpP+RGhira1VDfJyrxSlmpnxmt6u/atHyWVg2Mg5aQf8tT/V3Fy6wnuqIEytauhO10k+4UeddZ1/OGxFMksYG4aHi6tz/yuLRj2+rq3w/7RdjAFCwbbPryxCLw2PrpYScKpTk3DL2x3O8JFACuch1VZscypNdFBUt9UUjACDZ28TcaAIQgjg4DNL0IqdizjsbcKNqnwrngF4PnOfN0KetafhUl4IlOUUSI/KCXqZgpGjkSPxyvVqXXk/vDq/RIpYz5eMiPxXl58yfvdHfwJI8neaSleETTs7COiP7ba6VcftrI4LMMX/3vGeJw4Ox6vJ0ONRVoYHhX4xgJyVNMxdurQrgIe1F39sjEVDoY6R5pskPf5tx2OZq7AaPO8rIp8ZliS2rm7dVwm3+FAy3Dyyj3KhUPZm6EiIiXu5mEvputxNbc39H7TCUwXKO2Keavx2usPZ6YIRhstxlo3QWL52s1kc5qSe2pLVuiBuPsGnkk6j68HXYshOnaxjquFX2naoOb6MqfQnqraJH4rER/8hzgZB8tAm7rQ+YWBsc+6ChGrP4ZcOLxIF2z7cHeOwg0IBRl7Bob/bTFAWHLReRbT5Qr3OWOsxqWe7Ss+JgQALxxOZ9EOBqnloxDOoMeuWx+tIqsGLy+utoCnHS5/oaLCvHvYF7UJYHCIY1nuWCwTBkdXFwI0gUdDRC2CQBHnxpko+H5ngQ+gGs36LSxc=
      AZURE_VAULT_URL: AgAoiz2WSlfINmDjstuahkP9j7JR/tGjuQISGaYlIPTZCLzwEayOzh7NMqeQr0BZCgBOpWMkMXcbzmeNCExHElCBebKYl0U84jd1vGq92Hp9tKBNt0NwPBrKfzUO9dn27RUdO4KprPHHQF69xjZpcgt55MqBY8zrx06cnLZ+9JM2DylgWFCUpTee3BkMSYRkZySXrBKDVVaFYK4odmfMAf/mrxAsBd67MIYC/H1vl07S7KlnUkgovyanj8136YNvk1sLLDyWMdUZ085tOwkv01hGLJnUXFbq/UBrAqLV+N+Qu6P/SK4DS0RF3lMcMmKwUQr+uIfTzwqGMy11RDm8uJvxu01++UtO6yEeZbunmV4SFyg7Mr9ABurEgyek59Chi9ZBTiaOgtINjrJ5hq6LA7HSD4gEVa3SM7BnEz8HhlBvo97Bn1HarfpaCRWFQmh72oYh1SQps+DvSffqd4nyslq9j+JUd5wmswegDL2bwxD/Emb++oGTpbz47EyA5TmIazXjcwcZKXvdpo4sbpy+lP7kg10HM4h0u50TI9/uePldTf4CTnco1buDPrGxCb4iXQ4wV3+9a3g8Q0AnZQ/xoSdEl4EMz4/1dMIwq3xGJmKK8Jf+LeEpQCmPQdNyDMBHIbJvvF3xsrpG6W5A/kh7nGsCzJPxUAmkU9nz+n9eAXbyxy1wOFoH59EmfSBYaRD6kE8v4yHhvCq7jSxbBJOn0hnRUcbvjXtc/i6IEZlrlTthEO6yrY3n5w==
      AZURE_CLIENT_ID: AgBce97ekHtovbTAhL5MQ9oxhbkNshxZC35i/WIoep+GOhCKNsMbh7FWgRGnU6apOmiYeyk0JjQ/2m6eMB+q6tEFPC8j+IQ9Z+/FSmmNXf7L0uJwPz2Z2uhubPEDKfmXjDSH2JPdE5gbk103DxbaWPMhpWxOAJ0HROSta8pB6TL+if7ltsR+hAGgAOpmKlYxaw+fEMyV7Wf0m7JyfhbqFSACTiUrPJjPhNJ3JThZKqYyXjqBvIYEnwakaZNn7nphUSDl9vQmzQR9guFXqTADtqD573XG3owVwqGIgCG+6Rzj0fm3g9WQYbvCxZantMuM/7GIGERf/mGjRA6g1PGa88L/9yn99/gmdORXDEdC0i4vrvnJkP4pmvP3P9k+5va3zyNmuD6pnqoDJfgq5YZV8TdNFz25ADLckLG+HCuLnSdpVPS8ojXwRIZC1k0LLZOeCXgvRIwPd/kRfFTpaQUsDbCH7VkpFdCZTeMw+3hj8ZivvzB653Opyl4ttTp8w+GvNXdOkxE+JAhFG4KutUvGRoEGnclYohI5ZfSJxylJEixZKFUQpsVS6OMgrH5UEEcIUMEhtgNzdXiAoTlbNAV/mfaw4QZfojPHZ5SMBK+RzKBHZ6kNxkPaX7RzPRvyVmgoaE9VuqwsgD4SuIwNuoAXSnViLltYxSKvdVMAQM/YH9cSLt3xeKnfPoZqvr2lE0qhcw5iiwLEy/b4HA5OZpC72yuW+nXj0GgTpnaqxVKJxIOb/viinAM=
      AZURE_CLIENT_SECRET: AgAB88WOR2Bne2sBMqNdTumdW+AigWX+LlL9/K0MUZelt53Dnx/s5CWgjuKP2kDHvBUyVADQiNN32iq1M2N+RhXpuOW8JVIPUKV14M/TpApCdugNQ3affkqH85SuhlWEoFXUuN+m8aeLo9F+wyBIqzVrvlEtmzDAGg963coAZkTN34Z689eLGaGLNweh+3Y5vqgA8W/BVDVjdwOApnU/Qvca+LrWbw7zR5J7XfvEvtKbA4qGa27AHyd4bywj/C0WS2gyxK+7xoNOQZixMnvb95m6o4mCIYDIUmZr5r/35AcUhaRFDbb+JkPoy5z0z4lIagtAUVMPa0/iz+Km2huALz3opK4K+vtsEa94Z+PyTIrFSC5sxGJzw0dzrQpkdrfEXaSTGVUKrs6v/OK88Oe7fvvXGKQnLeE2S8dfFFRKagUTmmzQ0gHy1tLEIOhbVtkSvByFNi3OgFHJTzfJ4IyrutI0w6NqgM/8V9PcD6jhkSrHhikc8cK7efLUi6TfcYwYUyyeHrJu8pV3qL353OgIlQE2yHnAwNluH0plgH41H2ScrKq/IPWljrSoz6gYxHlXnBMvMKxfy7Qb9Vyy1wu51kCHtoD0E7/sG+ImY2XATPjriLTZz7oecGgPKmAIzADtaDlK64V2M7eOE9MvvXoEDiHlyTnqDI807aQzWYojahE2TG7wDKqZWABbwdUsAGYkALBC/vZffvZt1mOMtSGZWZjbl749VDdjoMesijWpjGNX4wI6
      AZURE_TENANT_ID: AgALnLlqLYk9haPNiNODrnxCH1QcFrPPSevwQkLhzWQYla6FrsQDu7IF1FiB0BfxCUQ1Dgp10bwI4sz+L1wd8Wg+8O61YIyGFniPcMrPKY9wAsuCJ48RgNqFKzmsiRTihEMvkqKCBHgnjyKchgBEf4S00QDoPUvTF1moU4VS8C/smSJfkOPpg2JEEwk+sU67YfgOU/8kKklvCzDMilz8sxqfAYWscYeGhRajc13FtIlXtlenIdKSWRbKj0mbUo5s3rRaGY0Us2MYuBNhXvzQJr8TZFhbr4iHISeknbe/zVrTbxeFpjrMP5i8ProsEVM2Dz8hvdvyTBSq5maI7QC+jjjqiqphTXqxI21R+Kn+BPgLNPnNCN81hCiFVOnaTisLTiHLjLVSs7QNLS3d6BOArJf7E/hawSKYSdlHVM/NSo/+CYY9iXTofljKHc+Hj6Q6h31RdhpjscCJ0qLiV2mafgh7kZUNR3T7mRU+hWjyZI2n4wCY766cDGOkfLy9Tb3brJvC2tHqQKJEgh1o2BAcT1+JdBLk8+GUksMEK9aIEfJR/y8r0cW4e3qiNAg6dM1jOuelJreGJ6J7I+x3gnb7Naek1OJOswu3ZlADBhHGdOjUHiuqxsa6rXyzymvXhxgpTE6XQrnfRxdICwVccLJeH+tUyIo2DfFrAnPNp58pYdtHKRTDAR/UcXQvDDMOFeIzM1s1+M22FYRLR4j+gc0J/Vas7bnv0gB1mo+2q2qiQSs2ECXNYZU=

  probes:
    liveness: true
    livenessInitialDelay: 100
    livenessPeriodSeconds: 10
    readiness: true
    readinessInitialDelay: 100
