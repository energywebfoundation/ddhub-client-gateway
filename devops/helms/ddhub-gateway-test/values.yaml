# Default values for ddhub-client-gateway-api.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.
ddhub-client-gateway-api:
  replicaCount: 2

  clientgateway:
    envVars :
      CACHE_SERVER_URL: https://identitycache-dev.energyweb.org/v1
      EVENT_SERVER_URL: https://identitycache-dev.energyweb.org
      DSB_BASE_URL: http://ddhub-messagebroker-proxy-test.ddhub-test.svc
      RPC_URL: https://volta-rpc-vkn5r5zx4ke71f9hcu0c.energyweb.org/
      EVENT_SERVER_URL: https://identitycache-dev.energyweb.org
      PARENT_NAMESPACE: ddhub.apps.energyweb.iam.ewc
      SECRETS_ENGINE: azure
      VAULT_ENDPOINT: http://vault.ddhub-dev.svc:8200
      SECRET_PREFIX: "ddhubtest1/"
      NODE_ENV: test
      OPENTELEMETRY_ENABLED: false
      EVENTS_MAX_PER_SECOND: "200"
      NO_COLOR: "true"
      IPFS_HOST: "ipfs.infura.io"
      IPFS_PROTOCOL: "https://"
      IPFS_PORT: "5001"
    ui:
      image:
        repository: aemocontainerregistry.azurecr.io/ddhub-client-gateway-frontend
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: 656eb648-bb0f-4e50-9684-297394e27acb
    scheduler:
      enabled: true
      image:
        repository: aemocontainerregistry.azurecr.io/ddhub-client-gateway-scheduler
        pullPolicy: IfNotPresent
        # Overrides the image tag whose default is the chart appVersion.
        tag: 656eb648-bb0f-4e50-9684-297394e27acb
  image:
    # repository: 098061033856.dkr.ecr.us-east-1.amazonaws.com/ew-dos-dsb-ecr
    repository: aemocontainerregistry.azurecr.io/ddhub-client-gateway-backend
    pullPolicy: IfNotPresent
    # Overrides the image tag whose default is the chart appVersion.
    tag: 656eb648-bb0f-4e50-9684-297394e27acb

  imagePullSecrets: []
  nameOverride: "ddhub-client-gateway-api-test-1"
  fullnameOverride: "ddhub-client-gateway-api-test-1"

  podSecurityContext:
    fsGroup: 2000

  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: nginx
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
      external-dns.alpha.kubernetes.io/cloudflare-proxied: "true"
      cert-manager.io/issuer: prod-issuer
      cert-manager.io/issuer-kind: OriginIssuer
      cert-manager.io/issuer-group: cert-manager.k8s.cloudflare.com
    hosts:
      - host: ddhub-gateway-test-1.energyweb.org
        paths:
        - path: /docs
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-api-test-1
            servicePort: 80
        - path: /api
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-api-test-1
            servicePort: 80
        - path: /docs-json
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-api-test-1
            servicePort: 80
        - path: /events
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-api-test-1
            servicePort: 80
        - path: /
          pathType: Prefix
          backend:
            serviceName: ddhub-client-gateway-api-test-1-ui
            servicePort: 80
    tls:
      - secretName: ddhub-gateway-test-tls-secret
        hosts:
          - ddhub-gateway-test-1.energyweb.org

  probes:
    liveness: true
    livenessInitialDelay: 120
    livenessPeriodSeconds: 10
    readiness: true
    readinessInitialDelay: 120

  sealedSecret:
    enabled: true
    encryptedData: 
      INFURA_PROJECT_ID: AgBoOw3E16sW21dsQPpXELFEBUEpeCTVB83/eh7p5OsRSSXplf9boZk16a76EQuQ03pNl6WFHVYN6dCrsWpQRhPDc3VyP7GJnJxOXyDwdkCvbf4v6tsjrjdAftCe061oObpyh1JmcmWwgv3HkHQft/ryNhSMiwnSj2RY73FpdS09ZwkwzVeshNUcSZ9pdi1Y/IF3bmwsUzgBRLfSbrQ9YxGujZ221mJoVd3rgXXT8Ojb/Ij+IR3Z+FTWLMbgsTPp0K1DlIPZLrnvYSou2EsosLMrXsaDTl3Y8gFmEZ5uBQsnRC0T7Eqmf6bsfkbkVJPDygm8hoQ/PhnMrLJGsJJky/LsRnevcqgYqQUeBbaqyk9h/ZpuUEeMtk+uVoUmG/C6hys40nmRRqwy80mNGbCXlLbcVPpVkIRbm9WcDGvXXM9Bzd545ooig+v9MUbAN82j1q1RBFQq9WcW8CDGwxMqJjc0j97h/vshc0M6Ou6ZJH47pJSOEQivB/f3XaPE1xhBvh/WO/wju/2a7uhYRTc46ARFbjuS9AKCRIxmaUI0BcxXmZqLgzqyS6ZrxsF7ABHvUsX62sxR6lMCxwb7gbaBuTnBRkcuHjjqqt8kwprNsbrll3C1M/KuXuS6m4J8fj+QYm+Fn8LtyrtWkdOzurxnqKipM3FTv9XC07BAOcBHW6hkHZEd90mzkWJvJ07wpUVO2uppZY0xly8UHY2wJptawKHX731MgTuOchlpAwg=
      INFURA_PROJECT_SECRET: AgDcmwQY4UIcJhIk1RO9J1kvz7nU3bYSN9NVDg8GM9OtCcTOKUDgm+YS1BCcz0HlkzoAZDppt4UaTRbdRyUzxogyObtB6eJCRvMecTT+pOh+BN8J5/xwzwQbcsQjTPhzLR2r6N6/KkuBZxYbywvpfdbDiMgnEWz6/qIGOk7mKW5hdSVCL68qtKgCCRGbl9FENXihI+TvWLeluPe8p+GmgRA0asJNe+QQ8QnzHY1nGmsxXQSUaM2qEStfxDPiukI1T7Te9ZeztwMu2WYpJXbCRVATylCc60XM+CMmwoTntNgV8ROkRoMGji000SCBbxzpdlGdzpv6q2i22IFOrUpcD5/BOd3SrbGUbPljZR+tXYlMflXlfChDfWOyND7topOJ5pfm/o0pGIo55+kMHdqFyuRp+qZzqV+vEfplkrKP/fsjWZlezwKC/srKCBXlGHvofG+qA5X2x+4T9C996Tt7WOi7M3zrT1KVB77oXYWtsxr6QfFOoP0wTMD0Csz5/bxyiFSJqX9gzrLV+KAuT2P+e6BJvA228mca4ZyrwbuL81IRCZx7+xr3kqgtqDAXFjAJ6BM4TnOxFhOPFyMHGgdDHBaEAVlRI02G9TrmI+8hjMJnIihr9oOCsazwWTIu73N0kKI91XJG1QbFhViTvskBuWaReIbgCEh3Vb14fLDr6/bsYDvef/ci/SKm27l41PowbMlQxzvEPu8It22zldXb9oiKF3aZo6BalZt9yb+nXlziBQ==
